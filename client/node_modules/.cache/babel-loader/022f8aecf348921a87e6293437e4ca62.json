{"ast":null,"code":"import _objectSpread from\"/home/will/src/fstudy/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/will/src/fstudy/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/will/src/fstudy/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _classCallCheck from\"/home/will/src/fstudy/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/will/src/fstudy/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/will/src/fstudy/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/will/src/fstudy/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/home/will/src/fstudy/client/node_modules/@babel/runtime/regenerator/index.js\";import{Table,Container,Button,Form}from'react-bootstrap';import React,{Component}from'react';import logo from\"./logo.svg\";import'./App.css';//import web3 from './web3.js'\nimport ipfs from'./ipfs';//import storehash from './storehash';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Guide=/*#__PURE__*/function(_Component){_inherits(Guide,_Component);var _super=_createSuper(Guide);function Guide(){var _this;_classCallCheck(this,Guide);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={title:'',cards:{}};_this.pack=function(){var j={};j[_this.state.title]=_this.state.cards;console.log(JSON.stringify(j));return Buffer.from(JSON.stringify(j));};_this.unpack=function(buf){var json=JSON.parse(buf.toString());for(var p in json){_this.setState({title:p});_this.setState({cards:json[p]});}};_this.populate=function(t,c){_this.setState({title:t});_this.setState({cards:c});};return _this;}_createClass(Guide,[{key:\"render\",value:function render(){var items=Object.entries(this.state.cards).map(function(_ref){var _ref2=_slicedToArray(_ref,2),f=_ref2[0],b=_ref2[1];return/*#__PURE__*/_jsx(Card,{front:f,back:b});});return/*#__PURE__*/_jsxs(\"div\",{className:\"guide\",children:[/*#__PURE__*/_jsx(\"p\",{children:this.state.title}),items]});}}]);return Guide;}(Component);var Card=/*#__PURE__*/function(_Component2){_inherits(Card,_Component2);var _super2=_createSuper(Card);function Card(){_classCallCheck(this,Card);return _super2.apply(this,arguments);}_createClass(Card,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-face\",children:/*#__PURE__*/_jsx(\"p\",{children:this.props.front})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-face\",children:/*#__PURE__*/_jsx(\"p\",{children:this.props.back})})]});}}]);return Card;}(Component);var GuideForm=/*#__PURE__*/function(_Component3){_inherits(GuideForm,_Component3);var _super3=_createSuper(GuideForm);function GuideForm(){var _this2;_classCallCheck(this,GuideForm);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this2=_super3.call.apply(_super3,[this].concat(args));_this2.state={title:'',idCards:[],ipfsHash:''};_this2.setTitle=function(event){_this2.setState({title:event.target.value});};_this2.createCard=function(){var obj={front:'',back:''};_this2.state.idCards.push(obj);_this2.setState({idCards:_this2.state.idCards});};_this2.genGuide=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var j,buffer;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();j={};j[_this2.state.title]=_this2.state.idCards;console.log(JSON.stringify(j));buffer=Buffer.from(JSON.stringify(j));_context.next=7;return ipfs.add(buffer,function(err,ipfsHash){console.log(err,ipfsHash);_this2.setState({ipfsHash:ipfsHash[0].hash});if(_this2.state.ipfsHash===''){alert(\"Error uploading study guide, please try again soon.\");}else{console.log(_this2.state.ipfsHash);var api='/api/create/'+_this2.state.ipfsHash;console.log(api);fetch(api).then(function(response){return response.json();}).then(function(data){return console.log(\"WOW \"+data.json());});}});case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref3.apply(this,arguments);};}();_this2.handleChange=function(cid,pos){return function(event){if(pos==0){_this2.state.idCards[cid].front=event.target.value;}else{_this2.state.idCards[cid].back=event.target.value;}_this2.setState(_objectSpread(_objectSpread({},_this2.state),{},{idCards:_this2.state.idCards}));};};return _this2;}_createClass(GuideForm,[{key:\"render\",value:function render(){var _this3=this;var items=this.state.idCards.map(function(c,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-face\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:i[0],onChange:_this3.handleChange(i,0)})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-face\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:i[1],onChange:_this3.handleChange(i,1)})})]});});return/*#__PURE__*/_jsx(\"div\",{className:\"guide\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:this.genGuide,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:this.state.title,onChange:this.setTitle}),/*#__PURE__*/_jsx(_Fragment,{children:items}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:this.createCard,children:\"Create Card\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Create Guide\"})]})});}}]);return GuideForm;}(Component);var App=/*#__PURE__*/function(_Component4){_inherits(App,_Component4);var _super4=_createSuper(App);function App(){var _this4;_classCallCheck(this,App);for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}_this4=_super4.call.apply(_super4,[this].concat(args));_this4.state={eguide:/*#__PURE__*/_jsx(GuideForm,{}),guide:null};return _this4;}_createClass(App,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(_Fragment,{children:this.state.eguide}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Guide,{})]})});}}]);return App;}(Component);export{App as default};","map":{"version":3,"sources":["/home/will/src/fstudy/client/src/App.js"],"names":["Table","Container","Button","Form","React","Component","ipfs","Guide","state","title","cards","pack","j","console","log","JSON","stringify","Buffer","from","unpack","buf","json","parse","toString","p","setState","populate","t","c","items","Object","entries","map","f","b","Card","props","front","back","GuideForm","idCards","ipfsHash","setTitle","event","target","value","createCard","obj","push","genGuide","preventDefault","buffer","add","err","hash","alert","api","fetch","then","response","data","handleChange","cid","pos","i","App","eguide","guide"],"mappings":"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","sourcesContent":["import {Table, Container, Button, Form} from 'react-bootstrap';\nimport React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n//import web3 from './web3.js'\nimport ipfs from './ipfs';\n//import storehash from './storehash';\n\nclass Guide extends Component {\n    state = {\n        title:'',\n        cards:{},\n    };\n\n    pack = () => {\n        let j = {};\n        j[this.state.title] = this.state.cards;\n        console.log(JSON.stringify(j));\n        return(Buffer.from(JSON.stringify(j)));\n        \n    }\n\n    unpack = (buf) => {\n        let json = JSON.parse(buf.toString());\n        for(const p in json) {\n            this.setState({title: p});\n            this.setState({cards: json[p]});\n        }\n    }\n\n    populate = (t,c) => {\n        this.setState({title: t});\n        this.setState({cards: c});\n    }\n    render() {\n        const items = Object.entries(this.state.cards).map(([f, b]) =>\n            <Card front={f} back={b}/>\n        );\n        return (\n            <div className=\"guide\">\n                <p>{this.state.title}</p>\n                {items}\n            </div>\n        );\n    }\n}\n\nclass Card extends Component {\n    render() {\n        return (\n            <div className=\"card\">\n                <div className=\"card-face\">\n                    <p>{this.props.front}</p>\n                </div>\n                <div className=\"card-face\">\n                    <p>{this.props.back}</p>\n                </div>\n            </div>\n        );\n    }\n}\n\nclass GuideForm extends Component {\n    state = {\n        title: '',\n        idCards: [],     \n        ipfsHash: ''\n    };\n\n    setTitle = (event) => {\n        this.setState({title: event.target.value});\n    };\n\n    createCard = () => {\n        let obj = {\n            front: '',\n            back: ''\n        };\n        this.state.idCards.push(obj);\n        this.setState({idCards: this.state.idCards});\n    }\n\n    genGuide = async (event) => {\n        event.preventDefault();\n\n        let j = {};\n        j[this.state.title] = this.state.idCards;\n        console.log(JSON.stringify(j));\n        let buffer = Buffer.from(JSON.stringify(j));\n\n        await ipfs.add(buffer, (err, ipfsHash) => {\n            console.log(err,ipfsHash);\n            this.setState({ ipfsHash:ipfsHash[0].hash });\n            if(this.state.ipfsHash === '') {\n                alert(\"Error uploading study guide, please try again soon.\");\n            } else {\n                console.log(this.state.ipfsHash);\n\t\t\t\tlet api = '/api/create/' + this.state.ipfsHash;\n\t\t\t\tconsole.log(api);\n\t\t\t\tfetch(api)\n\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t.then(data => console.log(\"WOW \" + data.json()));\n            }\n        });\n      \n\n    }\n    \n    handleChange = (cid, pos) => (event) => {\n        if(pos == 0) {\n            this.state.idCards[cid].front = event.target.value;\n        } else {\n            this.state.idCards[cid].back = event.target.value;\n        }\n        this.setState({...this.state, idCards: this.state.idCards});\n    }\n\n    render() {\n        const items = this.state.idCards.map((c, i) =>\n            <div className=\"card\">\n                <div className=\"card-face\">\n                    <input\n                        type=\"text\"\n                        value={i[0]}\n                        onChange={this.handleChange(i, 0)}\n                     />\n               </div>\n                <div className=\"card-face\">\n                    <input\n                        type=\"text\"\n                        value={i[1]}\n                        onChange={this.handleChange(i, 1)}\n                    />\n                </div>\n            </div>\n        );\n\n        return (\n            <div className=\"guide\">\n                <Form onSubmit={this.genGuide}>\n                    <input \n                        type=\"text\"\n                        value={this.state.title}\n                        onChange={this.setTitle}\n                    />\n                    <>{items}</>\n                    <Button variant=\"secondary\" onClick={this.createCard}>\n                        Create Card\n                    </Button>\n                    <Button variant=\"primary\" type=\"submit\">\n                        Create Guide\n                    </Button>\n                </Form>\n            </div>\n        );\n    };\n}\n\nexport default class App extends Component {\n    state = {\n        eguide:<GuideForm/>,\n        guide:null,\n    };\n    \n\n    render() {\n        return (\n\n<div className=\"App\">\n    <Container>\n        <>{this.state.eguide}</>\n        <hr />\n        <Guide/>\n    </Container>\n</div>\n\n        );\n    };\n}\n"]},"metadata":{},"sourceType":"module"}