{"ast":null,"code":"import _regeneratorRuntime from\"/home/wskj/src/fstudy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/wskj/src/fstudy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/wskj/src/fstudy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"/home/wskj/src/fstudy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/wskj/src/fstudy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/wskj/src/fstudy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/wskj/src/fstudy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Table,Container,Button,Form}from'react-bootstrap';import React,{Component}from'react';import logo from\"./logo.svg\";import'./App.css';//import web3 from './web3.js'\nimport ipfs from'./ipfs';//import storehash from './storehash';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Guide=/*#__PURE__*/function(_Component){_inherits(Guide,_Component);var _super=_createSuper(Guide);function Guide(){var _this;_classCallCheck(this,Guide);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={title:'',cards:{}};_this.pack=function(){var j={};j[_this.state.title]=_this.state.cards;return Buffer.from(JSON.stringify(j));};_this.unpack=function(buf){var json=JSON.parse(buf.toString());for(var p in json){_this.setState({title:p});_this.setState({cards:json[p]});}};return _this;}_createClass(Guide,[{key:\"render\",value:function render(){var items=Object.entries(this.state.cards).map(function(_ref){var _ref2=_slicedToArray(_ref,2),f=_ref2[0],b=_ref2[1];return/*#__PURE__*/_jsx(Card,{front:f,back:b});});return/*#__PURE__*/_jsxs(\"div\",{className:\"guide\",children:[/*#__PURE__*/_jsx(\"p\",{children:this.state.title}),items]});}}]);return Guide;}(Component);var Card=/*#__PURE__*/function(_Component2){_inherits(Card,_Component2);var _super2=_createSuper(Card);function Card(){_classCallCheck(this,Card);return _super2.apply(this,arguments);}_createClass(Card,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-face\",children:/*#__PURE__*/_jsx(\"p\",{children:this.props.front})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-face\",children:/*#__PURE__*/_jsx(\"p\",{children:this.props.back})})]});}}]);return Card;}(Component);var GuideForm=/*#__PURE__*/function(_Component3){_inherits(GuideForm,_Component3);var _super3=_createSuper(GuideForm);function GuideForm(){var _this2;_classCallCheck(this,GuideForm);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this2=_super3.call.apply(_super3,[this].concat(args));_this2.state={title:'',idCards:[['','']],//need index for dynamic relocation and such\nipfsHash:''};_this2.setTitle=function(event){_this2.setState({title:event.target.value});};_this2.createCard=function(){_this2.state.idCards.push(['','']);_this2.setState({idCards:_this2.state.idCards});};_this2.genGuide=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var g,c,i,buffer;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();g=new Guide();g.title=_this2.state.title;c={};for(i=0;i<_this2.state.idCards.length;i++){c[_this2.state.idCards[i][0]]=_this2.state.idCards[i][1];}g.cards=c;buffer=g.pack();_context.next=9;return ipfs.add(buffer,function(err,ipfsHash){console.log(err,ipfsHash);console.log(\"DOING\");_this2.setState({ipfsHash:ipfsHash[0].hash});if(_this2.state.ipfsHash===''){alert(\"Error uploading study guide, please try again soon.\");}else{console.log(_this2.state.ipfsHash);}});case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref3.apply(this,arguments);};}();_this2.handleChange=function(cid,pos){return function(event){_this2.state.idCards[cid[pos]]=event.target.value;console.log(cid+\" \"+pos);_this2.setState({idCards:_this2.state.idCards});};};return _this2;}_createClass(GuideForm,[{key:\"render\",value:function render(){var _this3=this;var items=this.state.idCards.map(function(c,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-face\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:i[0],onChange:_this3.handleChange(i,0)})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-face\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:i[1],onChange:_this3.handleChange(i,1)})})]});});return/*#__PURE__*/_jsx(\"div\",{className:\"guide\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:this.genGuide,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:this.state.title,onChange:this.setTitle}),/*#__PURE__*/_jsx(_Fragment,{children:items}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:this.createCard,children:\"Create Card\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Create Guide\"})]})});}}]);return GuideForm;}(Component);var App=/*#__PURE__*/function(_Component4){_inherits(App,_Component4);var _super4=_createSuper(App);function App(){var _this4;_classCallCheck(this,App);for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}_this4=_super4.call.apply(_super4,[this].concat(args));_this4.state={eguide:/*#__PURE__*/_jsx(GuideForm,{}),guide:null};return _this4;}_createClass(App,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(_Fragment,{children:this.state.eguide}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Guide,{})]})});}}]);return App;}(Component);export{App as default};","map":{"version":3,"sources":["/home/wskj/src/fstudy/client/src/App.js"],"names":["Table","Container","Button","Form","React","Component","ipfs","Guide","state","title","cards","pack","j","Buffer","from","JSON","stringify","unpack","buf","json","parse","toString","p","setState","items","Object","entries","map","f","b","Card","props","front","back","GuideForm","idCards","ipfsHash","setTitle","event","target","value","createCard","push","genGuide","preventDefault","g","c","i","length","buffer","add","err","console","log","hash","alert","handleChange","cid","pos","App","eguide","guide"],"mappings":"k/BAAA,OAAQA,KAAR,CAAeC,SAAf,CAA0BC,MAA1B,CAAkCC,IAAlC,KAA6C,iBAA7C,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,C,6BAEA,MAAO,WAAP,CACA;AACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA;gJAEMC,CAAAA,K,uTACFC,K,CAAQ,CACJC,KAAK,CAAC,EADF,CAEJC,KAAK,CAAC,EAFF,C,OAKRC,I,CAAO,UAAM,CACT,GAAIC,CAAAA,CAAC,CAAG,EAAR,CACAA,CAAC,CAAC,MAAKJ,KAAL,CAAWC,KAAZ,CAAD,CAAsB,MAAKD,KAAL,CAAWE,KAAjC,CACA,MAAOG,CAAAA,MAAM,CAACC,IAAP,CAAYC,IAAI,CAACC,SAAL,CAAeJ,CAAf,CAAZ,CAAP,CACH,C,OAEDK,M,CAAS,SAACC,GAAD,CAAS,CACd,GAAIC,CAAAA,IAAI,CAAGJ,IAAI,CAACK,KAAL,CAAWF,GAAG,CAACG,QAAJ,EAAX,CAAX,CACA,IAAI,GAAMC,CAAAA,CAAV,GAAeH,CAAAA,IAAf,CAAqB,CACjB,MAAKI,QAAL,CAAc,CAACd,KAAK,CAAEa,CAAR,CAAd,EACA,MAAKC,QAAL,CAAc,CAACb,KAAK,CAAES,IAAI,CAACG,CAAD,CAAZ,CAAd,EACH,CACJ,C,uDAED,iBAAS,CACL,GAAME,CAAAA,KAAK,CAAGC,MAAM,CAACC,OAAP,CAAe,KAAKlB,KAAL,CAAWE,KAA1B,EAAiCiB,GAAjC,CAAqC,gDAAEC,CAAF,UAAKC,CAAL,6BAC/C,KAAC,IAAD,EAAM,KAAK,CAAED,CAAb,CAAgB,IAAI,CAAEC,CAAtB,EAD+C,EAArC,CAAd,CAGA,mBACI,aAAK,SAAS,CAAC,OAAf,wBACI,mBAAI,KAAKrB,KAAL,CAAWC,KAAf,EADJ,CAEKe,KAFL,GADJ,CAMH,C,mBA9BenB,S,KAiCdyB,CAAAA,I,uNACF,iBAAS,CACL,mBACI,aAAK,SAAS,CAAC,MAAf,wBACI,YAAK,SAAS,CAAC,WAAf,uBACI,mBAAI,KAAKC,KAAL,CAAWC,KAAf,EADJ,EADJ,cAII,YAAK,SAAS,CAAC,WAAf,uBACI,mBAAI,KAAKD,KAAL,CAAWE,IAAf,EADJ,EAJJ,GADJ,CAUH,C,kBAZc5B,S,KAeb6B,CAAAA,S,uVACF1B,K,CAAQ,CACJC,KAAK,CAAE,EADH,CAEJ0B,OAAO,CAAE,CAAC,CAAC,EAAD,CAAK,EAAL,CAAD,CAFL,CAEqB;AACzBC,QAAQ,CAAE,EAHN,C,QAMRC,Q,CAAW,SAACC,KAAD,CAAW,CAClB,OAAKf,QAAL,CAAc,CAACd,KAAK,CAAE6B,KAAK,CAACC,MAAN,CAAaC,KAArB,CAAd,EACH,C,QAEDC,U,CAAa,UAAM,CACf,OAAKjC,KAAL,CAAW2B,OAAX,CAAmBO,IAAnB,CAAwB,CAAC,EAAD,CAAK,EAAL,CAAxB,EACA,OAAKnB,QAAL,CAAc,CAACY,OAAO,CAAE,OAAK3B,KAAL,CAAW2B,OAArB,CAAd,EACH,C,QAEDQ,Q,2FAAW,iBAAOL,KAAP,mIACPA,KAAK,CAACM,cAAN,GACIC,CAFG,CAEC,GAAItC,CAAAA,KAAJ,EAFD,CAGPsC,CAAC,CAACpC,KAAF,CAAU,OAAKD,KAAL,CAAWC,KAArB,CACIqC,CAJG,CAIC,EAJD,CAKP,IAAQC,CAAR,CAAU,CAAV,CAAaA,CAAC,CAAC,OAAKvC,KAAL,CAAW2B,OAAX,CAAmBa,MAAlC,CAA0CD,CAAC,EAA3C,CAA+C,CAC3CD,CAAC,CAAC,OAAKtC,KAAL,CAAW2B,OAAX,CAAmBY,CAAnB,EAAsB,CAAtB,CAAD,CAAD,CAA8B,OAAKvC,KAAL,CAAW2B,OAAX,CAAmBY,CAAnB,EAAsB,CAAtB,CAA9B,CACH,CACDF,CAAC,CAACnC,KAAF,CAAUoC,CAAV,CAEIG,MAVG,CAUMJ,CAAC,CAAClC,IAAF,EAVN,uBAYDL,CAAAA,IAAI,CAAC4C,GAAL,CAASD,MAAT,CAAiB,SAACE,GAAD,CAAMf,QAAN,CAAmB,CACtCgB,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAgBf,QAAhB,EACAgB,OAAO,CAACC,GAAR,CAAY,OAAZ,EACA,OAAK9B,QAAL,CAAc,CAAEa,QAAQ,CAACA,QAAQ,CAAC,CAAD,CAAR,CAAYkB,IAAvB,CAAd,EACA,GAAG,OAAK9C,KAAL,CAAW4B,QAAX,GAAwB,EAA3B,CAA+B,CAC3BmB,KAAK,CAAC,qDAAD,CAAL,CACH,CAFD,IAEO,CACHH,OAAO,CAACC,GAAR,CAAY,OAAK7C,KAAL,CAAW4B,QAAvB,EACH,CACJ,CATK,CAZC,uD,uEAwBXoB,Y,CAAe,SAACC,GAAD,CAAMC,GAAN,QAAc,UAACpB,KAAD,CAAW,CACpC,OAAK9B,KAAL,CAAW2B,OAAX,CAAmBsB,GAAG,CAACC,GAAD,CAAtB,EAA+BpB,KAAK,CAACC,MAAN,CAAaC,KAA5C,CACAY,OAAO,CAACC,GAAR,CAAYI,GAAG,CAAG,GAAN,CAAYC,GAAxB,EACA,OAAKnC,QAAL,CAAc,CAACY,OAAO,CAAE,OAAK3B,KAAL,CAAW2B,OAArB,CAAd,EACH,CAJc,E,4DAMf,iBAAS,iBACL,GAAMX,CAAAA,KAAK,CAAG,KAAKhB,KAAL,CAAW2B,OAAX,CAAmBR,GAAnB,CAAuB,SAACmB,CAAD,CAAIC,CAAJ,qBACjC,aAAK,SAAS,CAAC,MAAf,wBACI,YAAK,SAAS,CAAC,WAAf,uBACI,cACI,IAAI,CAAC,MADT,CAEI,KAAK,CAAEA,CAAC,CAAC,CAAD,CAFZ,CAGI,QAAQ,CAAE,MAAI,CAACS,YAAL,CAAkBT,CAAlB,CAAqB,CAArB,CAHd,EADJ,EADJ,cAQI,YAAK,SAAS,CAAC,WAAf,uBACI,cACI,IAAI,CAAC,MADT,CAEI,KAAK,CAAEA,CAAC,CAAC,CAAD,CAFZ,CAGI,QAAQ,CAAE,MAAI,CAACS,YAAL,CAAkBT,CAAlB,CAAqB,CAArB,CAHd,EADJ,EARJ,GADiC,EAAvB,CAAd,CAmBA,mBACI,YAAK,SAAS,CAAC,OAAf,uBACI,MAAC,IAAD,EAAM,QAAQ,CAAE,KAAKJ,QAArB,wBACI,cACI,IAAI,CAAC,MADT,CAEI,KAAK,CAAE,KAAKnC,KAAL,CAAWC,KAFtB,CAGI,QAAQ,CAAE,KAAK4B,QAHnB,EADJ,cAMI,yBAAGb,KAAH,EANJ,cAOI,KAAC,MAAD,EAAQ,OAAO,CAAC,WAAhB,CAA4B,OAAO,CAAE,KAAKiB,UAA1C,yBAPJ,cAUI,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,IAAI,CAAC,QAA/B,0BAVJ,GADJ,EADJ,CAkBH,C,uBApFmBpC,S,KAuFHsD,CAAAA,G,+TACjBnD,K,CAAQ,CACJoD,MAAM,cAAC,KAAC,SAAD,IADH,CAEJC,KAAK,CAAC,IAFF,C,sDAMR,iBAAS,CACL,mBAER,YAAK,SAAS,CAAC,KAAf,uBACI,MAAC,SAAD,yBACI,yBAAG,KAAKrD,KAAL,CAAWoD,MAAd,EADJ,cAEI,aAFJ,cAGI,KAAC,KAAD,IAHJ,GADJ,EAFQ,CAWH,C,iBAnB4BvD,S,SAAZsD,G","sourcesContent":["import {Table, Container, Button, Form} from 'react-bootstrap';\nimport React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n//import web3 from './web3.js'\nimport ipfs from './ipfs';\n//import storehash from './storehash';\n\nclass Guide extends Component {\n    state = {\n        title:'',\n        cards:{},\n    };\n\n    pack = () => {\n        let j = {};\n        j[this.state.title] = this.state.cards;\n        return(Buffer.from(JSON.stringify(j)));\n    }\n\n    unpack = (buf) => {\n        let json = JSON.parse(buf.toString());\n        for(const p in json) {\n            this.setState({title: p});\n            this.setState({cards: json[p]});\n        }\n    }\n\n    render() {\n        const items = Object.entries(this.state.cards).map(([f, b]) =>\n            <Card front={f} back={b}/>\n        );\n        return (\n            <div className=\"guide\">\n                <p>{this.state.title}</p>\n                {items}\n            </div>\n        );\n    }\n}\n\nclass Card extends Component {\n    render() {\n        return (\n            <div className=\"card\">\n                <div className=\"card-face\">\n                    <p>{this.props.front}</p>\n                </div>\n                <div className=\"card-face\">\n                    <p>{this.props.back}</p>\n                </div>\n            </div>\n        );\n    }\n}\n\nclass GuideForm extends Component {\n    state = {\n        title: '',\n        idCards: [['', '']],     //need index for dynamic relocation and such\n        ipfsHash: ''\n    };\n\n    setTitle = (event) => {\n        this.setState({title: event.target.value});\n    };\n\n    createCard = () => {\n        this.state.idCards.push(['', '']);\n        this.setState({idCards: this.state.idCards});\n    }\n\n    genGuide = async (event) => {\n        event.preventDefault();\n        let g = new Guide();\n        g.title = this.state.title;\n        let c = {};\n        for(let i=0; i<this.state.idCards.length; i++) {\n            c[this.state.idCards[i][0]] = this.state.idCards[i][1];\n        }\n        g.cards = c;\n        \n        let buffer = g.pack();\n\n        await ipfs.add(buffer, (err, ipfsHash) => {\n            console.log(err,ipfsHash);\n            console.log(\"DOING\");\n            this.setState({ ipfsHash:ipfsHash[0].hash });\n            if(this.state.ipfsHash === '') {\n                alert(\"Error uploading study guide, please try again soon.\");\n            } else {\n                console.log(this.state.ipfsHash);\n            }\n        });\n    }\n    \n    handleChange = (cid, pos) => (event) => {\n        this.state.idCards[cid[pos]] = event.target.value;\n        console.log(cid + \" \" + pos);\n        this.setState({idCards: this.state.idCards});\n    }\n\n    render() {\n        const items = this.state.idCards.map((c, i) =>\n            <div className=\"card\">\n                <div className=\"card-face\">\n                    <input\n                        type=\"text\"\n                        value={i[0]}\n                        onChange={this.handleChange(i, 0)}\n                     />\n               </div>\n                <div className=\"card-face\">\n                    <input\n                        type=\"text\"\n                        value={i[1]}\n                        onChange={this.handleChange(i, 1)}\n                    />\n                </div>\n            </div>\n        );\n\n        return (\n            <div className=\"guide\">\n                <Form onSubmit={this.genGuide}>\n                    <input \n                        type=\"text\"\n                        value={this.state.title}\n                        onChange={this.setTitle}\n                    />\n                    <>{items}</>\n                    <Button variant=\"secondary\" onClick={this.createCard}>\n                        Create Card\n                    </Button>\n                    <Button variant=\"primary\" type=\"submit\">\n                        Create Guide\n                    </Button>\n                </Form>\n            </div>\n        );\n    };\n}\n\nexport default class App extends Component {\n    state = {\n        eguide:<GuideForm/>,\n        guide:null,\n    };\n    \n\n    render() {\n        return (\n\n<div className=\"App\">\n    <Container>\n        <>{this.state.eguide}</>\n        <hr />\n        <Guide/>\n    </Container>\n</div>\n\n        );\n    };\n}\n"]},"metadata":{},"sourceType":"module"}